<<<<<<< local
Service
	Start
		Read Config			
			Targets
				- aws vs machine
				- path
				- Copy count
				- MinFreeSpace for machine target
			Thread count
			error email
			admin email
			logs
				- CVS For wooley
				- Debug
			Watch Folders
				- path
				- pattern match
				- smil validation bool
				- priority
			Database
				- ip/dns
				- db name	
			> Run Tests on all ... Stop if errors
		Create Watch Folder(s)
		Start Console Instance
			- Create banner
		Start ConsumerThread
		
Watch Folder
	On_Create
		- test name convention
		if smil == true 
			test file contents
		else 
			do nothing
		- Get mediainfo
		- Add to Pre Copy Queue
		- add files/fileset to the db
	On_Modify
		If rename or resize then
			- test name convention
			if smil == true 
				test file contents
			- Get mediainfo
			- update change in Pre Copy Queue
			- update change in DB
		else
			- notify admin/error email
	On_Delete
		If files/set in files done Queue then
			pop from files done queue
		else	
			notify email

ConsumerThread		
	Create CopyThreadpool
	Create PostCopyThreadPool
	Create Pre Copy Queue
	Create Post Copy Queue
	Create Files Done Queue	
	Run until break:
		refresh targets from config
		If pre copy Queue > 1 and CopyThread pool < max threads
			- pop file from the queue
			- update db process 
			- add to the copythread
		elif post Copy Queue > 1
			- update db process
			- pop and add to post Copy Thread Pool
		else
			- Sleep
		
Copy Thread
	- update DB entries
	- update csv log as started
	- update console as started
	- copy Process
		- start copy
		- sleep
		- update db progress
	- make sure db progress at 100
	- send set to post copy queue
	- set thread as free

Post Copy Thread
	if !copy_errors and target validates
		- add set to Files Done Queue
		- update csv as finished
		- update console as finished
		- delete set
	else
		- add set to pre Copy Queue
		- log validation issue

		
Postgress
- http://initd.org/psycopg/articles/2015/06/16/psycopg-261-released/


Threads
- http://www.tutorialspoint.com/python/python_multithreading.htm
- http://stackoverflow.com/questions/2846653/python-multithreading-for-dummies
- http://agiliq.com/blog/2013/09/understanding-threads-in-python/
- http://agiliq.com/blog/2013/10/producer-consumer-problem-in-python/

Progress
=======
Service
	Start
		Read Config			
			Targets
				- aws vs machine
				- path
				- Copy count
				- MinFreeSpace for machine target
			Thread count
			error email
			admin email
			logs
				- CVS For wooley
				- Debug
			Watch Folders
				- path
				- pattern match
				- smil validation bool
				- priority
			Database
				- ip/dns
				- db name	
			> Run Tests on all ... Stop if errors
		Create Watch Folder(s)
		Start Console Instance
			- Create banner
		Start ConsumerThread
		
Watch Folder
	On_Create
		- test name convention
		if smil == true 
			test file contents
		else 
			do nothing
		- Get mediainfo
		- Add to Pre Copy Queue
		- add files/fileset to the db
	On_Modify
		If rename or resize then
			- test name convention
			if smil == true 
				test file contents
			- Get mediainfo
			- update change in Pre Copy Queue
			- update change in DB
		else
			- notify admin/error email
	On_Delete
		If files/set in files done Queue then
			pop from files done queue
		else	
			notify email

ConsumerThread		
	Create CopyThreadpool
	Create PostCopyThreadPool
	Create Pre Copy Queue
	Create Post Copy Queue
	Create Files Done Queue	
	Run until break:
		refresh targets from config
		If pre copy Queue > 1 and CopyThread pool < max threads
			- pop file from the queue
			- update db process 
			- add to the copythread
		elif post Copy Queue > 1
			- update db process
			- pop and add to post Copy Thread Pool
		else
			- Sleep
		
Copy Thread
	- update DB entries
	- update csv log as started
	- update console as started
	- copy Process
		- start copy
		- sleep
		- update db progress
	- make sure db progress at 100
	- send set to post copy queue
	- set thread as free

Post Copy Thread
	if !copy_errors and target validates
		- add set to Files Done Queue
		- update csv as finished
		- update console as finished
		- delete set
	else
		- add set to pre Copy Queue
		- log validation issue

		
Postgress
- http://initd.org/psycopg/articles/2015/06/16/psycopg-261-released/


Threads
- http://www.tutorialspoint.com/python/python_multithreading.htm
- http://stackoverflow.com/questions/22079426/python-copy-file-using-subprocess#22082789

Progress
>>>>>>> other
- http://pythoncentral.io/how-to-movecopy-a-file-or-directory-folder-with-a-progress-bar-in-python/